<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>vue-zhufeng</title>
  <link rel="stylesheet" href="./node_modules/bootstrap/dist/css/bootstrap.css">
</head>
<body>
<div id="app">
  父：{{money}}
  <!--4.使用-->
  <!--相当于订阅，子组件绑定一个事件child.$on('change-m',change)  -->
  <child :m="money" @change-m="change"></child>
  <!--给子组件标签添加一个m属性，属性值来自父组件，因为money是一个变量，所以动态绑定:m="money"，如果直接绑定m="money"得到的是字符串"money"，而不是变量money的值。
  如：a='1' =>得到的1是一个字符串 :a="1" =>得到的1是一个数字
  a="true" =>得到的是一个字符串"true"   :a="true" =>得到的是一个布尔
  -->
</div>
<script src="./node_modules/axios/dist/axios.js"></script>
<script src="./node_modules/vue/dist/vue.js"></script>
<script src="./node_modules/vue-router/dist/vue-router.js"></script>
<script>
  //1.创建一个子组件
  let child = {
    // props:['m'], // 数组this.m = 400; 在当前子组件上声明一个m属性，值是父亲的
    props: {
      m: {
        // 校验属性的类型，由属性值那个变量的类型决定。
        type: [String, Function, Object, Array, Number, Boolean],
        // default:0 // 给m赋默认值default，不传时调用默认值
        required: true,// 表示当前属性m必须传递（不能和default同用）

        // 自定义校验器（很少用，一般用前三个）
        validator(val){ //第一个参数是当前传递的值
          return val > 300; //返回true表示通过，false不通过
        }
      },
    },
    template: '<div>子：{{m}}<button @click="change">更多钱</button></div>',
    //可以将子组件标签上增加的自定义属性设置成和父组件中变量一样的名字，这样在子组件中取值时可以和父组件保持一致。
    // 即m改成money：<child :money="money" @change-m="change"></child>
    //template:'<div>子：{{money}}<button @click="change">更多钱</button></div>'
    methods: {
      change(){
        //child.$on('change-m',change)
        //child.$emit("change-m",800)
        this.$emit("change-m", 800)//this->child子组件发射自定义事件，让父的方法执行
      }
    },
  };

  //父组件
  let vm = new Vue({ //实例本身也是组件
    el: '#app',
    data: {money: 400},
    components: {child},//3.注册子组件
    methods: {
      change(val){//on('xxx',things)//相当于发布订阅的on
        this.money = val
      }
    }
  });
</script>
</body>
</html>
